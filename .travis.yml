sudo: required

language: cpp

services:
  - docker

compiler:
  - gcc

jobs:
  include:
    - stage: test
      dist: trusty
      before_install:
        - sudo apt-get update -qq
        - sudo apt-get install build-essential cmake libboost-system-dev libboost-thread-dev libgtest-dev
        - cd /usr/src/gtest
        - sudo cmake CMakeLists.txt
        - sudo make
        - sudo cp *.a /usr/lib
      script:
        - cd ${TRAVIS_BUILD_DIR}
        - cmake --version
        - cmake .
        - make
        - make test
    - dist: xenial
      before_install:
        - sudo apt-get update -qq
        - sudo apt-get install build-essential cmake libboost-system-dev libboost-thread-dev libgtest-dev
        - cd /usr/src/gtest
        - sudo cmake CMakeLists.txt
        - sudo make
        - sudo cp *.a /usr/lib
      script:
        - cd ${TRAVIS_BUILD_DIR}
        - cmake --version
        - cmake .
        - make
        - make test
    - dist: bionic
      before_install:
        - sudo apt-get update -qq
        - sudo apt-get install build-essential cmake libboost-system-dev libboost-thread-dev libgtest-dev
        - cd /usr/src/gtest
        - sudo cmake CMakeLists.txt
        - sudo make
        - sudo cp *.a /usr/lib
      script:
        - cd ${TRAVIS_BUILD_DIR}
        - cmake --version
        - cmake .
        - make
        - make test
